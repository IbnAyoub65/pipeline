FROM maven:3.6.3-amazoncorretto AS build
WORKDIR /app
COPY . .
RUN mvn clean package

FROM openjdk:17-slim-bullseye
WORKDIR /app
RUN apt-get update && apt-get install -y maven
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} /app/pipeline-0.0.1-SNAPSHOT.jar
ENTRYPOINT ["java", "-jar", "/app/pipeline-0.0.1-SNAPSHOT.jar"]
